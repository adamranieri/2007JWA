<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Monongalia County School System</title>
    </head>
        
    <body>
        <h1>Monongalia County School System</h1>
        <button onclick="getAllSchools()">Get All Schools</button>

        <div>
            <h3>School Creator</h3>
            <input type="text" id="nameInput" placeholder="School Name"/>
            <input type="number" id="capacityInput" placeholder="School Capacity"/>
            <button id="schoolCreateBtn" onclick="createSchool()">Create School</button>
        </div>

        <table id="schoolTable" hidden>
            <thead><th>ID</th> <th>Name</th> <th>Capacity</th></thead>
            <tr><td id="sIdField">N/A</td> <td id="nameField">N/A</td> <td id="capacityField">N/A</td></tr>
        </table>
    </body>

    <script>
        // CORS is cross origin resource sharing. It is a security feature of the internet
        // CORS is a way to prevent malicious JS from accessing apis it should not
        
        async function getAllSchools() {
            const httpResponse = await fetch("http://localhost:7000/schools");
            const schools = await httpResponse.json();
            console.log(schools);
        }

        async function createSchool() {
            // getting inputs to create an object that has those values
            const sId = 0;
            const name = document.getElementById("nameInput").value;
            const capacity = Number.parseInt(document.getElementById("capacityInput").value);
            let school = {
                sId: sId,
                name: name,
                capacity: capacity
            };

            // config object literal. An obejct iwth a bundh of configuration properties to be used in a function
            const config = {
                method: "POST",
                headers: {'Content-Type': 'Application/json'}, // you can use the headers property to set headers
                body: JSON.stringify(school)
            }

            const httpResponse = await fetch("http://localhost:7000/schools", config)
            school = await httpResponse.json();

            document.getElementById("sIdField").innerHTML = school.sId;
            document.getElementById("nameField").innerHTML = school.name;
            document.getElementById("capacityField").innerHTML = school.capacity;

            document.getElementById("schoolTable").removeAttribute("hidden");
            console.log(school);
        }

    </script>
</html>