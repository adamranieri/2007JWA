<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMP</title>
    <link rel="stylesheet" href="../generalStyles.css">
</head>

<body onload="initialize()">
    <a href="../xyz-loginpage-dummy.html">Back</a>


    <table id=table >




    </table>

    <button id=submitRequest onclick="moveToReimbursementPage()"> Submit Request</button>




    <script id="empScript">

        

        function initialize() {
            //global var
            
            emp = JSON.parse(window.localStorage.getItem("emp"));
            console.log(emp);

            populateTable();
        };


        function populateTable(){

            console.log(emp.reqs);

            let tb= `<th>The Request</th>
                    <th>Status</th>
                    <th>Reason</th>
                    `;
            for (let i=0; i<emp.reqs.length; i++){
                tb+=
                `<tr> 
                <td>${emp.reqs[i].reimbursementRequest} </td>
                <td>${emp.reqs[i].reimbursementStatus} </td>
                <td>${emp.reqs[i].reason}              <td>           
                </tr>`
            }

            document.getElementById("table").innerHTML = tb;
        }


        function moveToReimbursementPage() {
            let credentials = { mgrId: emp.mgr.mgrId, empId: emp.empId }
            window.localStorage.setItem("crd", JSON.stringify(credentials));
            window.location.replace("./emp-reimbursement.html");

        }


    </script>


</style>
</body>

</html>